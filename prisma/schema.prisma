generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AlphaSession {
  id                String   @id @default(cuid())
  season            String
  startDate         DateTime
  endDate           DateTime
  meetingDay        String
  meetingTime       String
  location          String
  description       String   @db.Text
  registrationOpen  Boolean  @default(true)
  registrationUrl   String
  maxCapacity       Int?
  currentCount      Int      @default(0)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([startDate])
  @@index([registrationOpen])
}

model Message {
  id          String   @id @default(cuid())
  title       String
  speaker     String
  date        DateTime
  series      String?
  scripture   String?
  description String?  @db.Text
  videoUrl    String?
  audioUrl    String?
  thumbnail   String?
  tags        String[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([date])
  @@index([series])
  @@index([speaker])
}

model Event {
  id                String   @id @default(cuid())
  title             String
  description       String   @db.Text
  startDate         DateTime
  endDate           DateTime?
  startTime         String?  // "6:30 PM" (human-readable)
  endTime           String?  // "8:30 PM"
  location          String?
  imageUrl          String?
  registrationUrl   String?
  registrationOpen  Boolean  @default(false)
  category          String
  featured          Boolean  @default(false)
  recurring         Boolean  @default(false)
  recurrenceRule    String?  // "weekly", "monthly", etc.
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([startDate])
  @@index([category])
  @@index([featured])
}

model Ministry {
  id          String   @id @default(cuid())
  name        String
  category    String
  description String   @db.Text
  leader      String?
  leaderEmail String?
  meetingInfo String?  @db.Text
  imageUrl    String?
  active      Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([category])
  @@index([active])
  @@index([order])
}

model StaffMember {
  id         String   @id @default(cuid())
  name       String
  role       String
  title      String?   // Specific job title (e.g. "Children's Ministry Director")
  department String?   // "Pastoral", "Worship", "Kids", "Youth", "Admin", "Operations"
  email      String?
  phone      String?
  bio        String?  @db.Text
  photoUrl   String?
  order      Int      @default(0)
  leadership Boolean  @default(false)
  active     Boolean  @default(true)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([department])
  @@index([order])
  @@index([leadership])
  @@index([active])
}

model SmallGroup {
  id              String   @id @default(cuid())
  name            String
  type            String   // "growth" or "life"
  description     String   @db.Text
  leader          String
  leaderEmail     String?
  meetingDay      String?
  meetingTime     String?
  location        String?
  imageUrl        String?
  capacity        Int?
  currentMembers  Int      @default(0)
  openForSignup   Boolean  @default(true)
  churchCenterUrl String?
  active          Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([type])
  @@index([active])
  @@index([openForSignup])
}

model PrayerRequest {
  id        String   @id @default(cuid())
  name      String
  email     String?
  phone     String?
  request   String   @db.Text
  isPublic  Boolean  @default(false)
  status    String   @default("new") // "new", "praying", "answered"
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([status])
  @@index([createdAt])
}

model SupportResource {
  id           String   @id @default(cuid())
  title        String
  category     String   // "stephen_ministry", "counseling", "financial", "marriage", "community_care", "support_groups"
  description  String   @db.Text
  contactName  String?
  contactEmail String?
  contactPhone String?
  externalUrl  String?
  imageUrl     String?
  order        Int      @default(0)
  active       Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([category])
  @@index([active])
  @@index([order])
}

model SiteSettings {
  id            String   @id @default(cuid())
  serviceTimes  String   @db.Text
  address       String
  phone         String
  email         String
  liveStreamUrl String?
  donationUrl   String?
  facebookUrl   String?
  instagramUrl  String?
  youtubeUrl    String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}
